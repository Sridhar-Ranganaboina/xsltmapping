@Override
public List<AuditDAO> getAuditDataForTodayByUserId(String userId) {
    try {
        // Get today's start and end timestamps in UTC
        LocalDate today = LocalDate.now(ZoneOffset.UTC);
        String startOfDay = today.atStartOfDay().toInstant(ZoneOffset.UTC).toString();      // e.g., 2025-05-16T00:00:00Z
        String endOfDay = today.plusDays(1).atStartOfDay().toInstant(ZoneOffset.UTC).toString(); // 2025-05-17T00:00:00Z

        QueryConditional queryConditional = QueryConditional.sortBetween(
            Key.builder().partitionValue(userId).sortValue(startOfDay).build(),
            Key.builder().partitionValue(userId).sortValue(endOfDay).build()
        );

        return auditDynamoDbTable.index("event_timestamp_index")
            .query(r -> r.queryConditional(queryConditional))
            .stream()
            .flatMap(page -> page.items().stream())
            .collect(Collectors.toList());

    } catch (DynamoDbException e) {
        log.error("Failed to retrieve today's audit records for userId: {}. Error: {}", userId, e.getMessage());
        throw new AuditException("Failed to retrieve today's audit records", e);
    }
}
